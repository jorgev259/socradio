{"version":3,"sources":["css/widget.module.scss","css/player.module.scss","Socket.js","js/Slider.jsx","Widget.jsx","Player.jsx","App.js","index.js"],"names":["module","exports","socket","initiateSocket","io","path","console","log","disconnectSocket","disconnect","subscribeToStation","station","cb","on","useStyles","makeStyles","root","color","display","flexDirection","ContinuousSlider","props","classes","className","Slider","min","max","step","value","onChange","handleChange","aria-labelledby","Player","useState","audio","setAudio","playing","setPlay","loading","setLoading","ref","useCallback","node","onplay","onpause","onloadstart","waiting","onloadeddata","canplay","useAudioRef","audioRef","useAxios","data","volume","setVolumeState","album","title","artist","song","setSong","useEffect","src","load","play","msg","Container","classnames","styles","player","preload","id","background","effect","onError","ev","target","alt","Row","content","icon","Col","xs","style","height","fontSize","Marquee","text","stations","Object","keys","filter","s","map","stationName","i","arr","current","disabled","href","length","md","onClick","pause","playpause","htmlFor","tabIndex","overflowed","setOverflow","whiteSpace","width","visibility","position","isOverflowed","marquee","routes","App","routeResult","useRoutes","window","location","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.be81df81.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"player\":\"widget_player__1r28i\",\"current\":\"widget_current__1zF5V\",\"stations\":\"widget_stations__3kOEF\",\"background\":\"widget_background__1yy9P\",\"effect\":\"widget_effect__2nXGx\",\"station\":\"widget_station__2iPJJ\",\"content\":\"widget_content__3Gh7b\",\"playpause\":\"widget_playpause__1b3Zg\",\"playing\":\"widget_playing__20bZ1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"player\":\"player_player__3tV8g\",\"current\":\"player_current__mOoWV\",\"stations\":\"player_stations__1tZXQ\",\"background\":\"player_background__2a6F5\",\"effect\":\"player_effect__3GAgQ\",\"station\":\"player_station__z1nJz\",\"content\":\"player_content__2HaZS\",\"playpause\":\"player_playpause__3uP9O\",\"playing\":\"player_playing__N2IaC\"};","import io from 'socket.io-client'\nlet socket\n\nexport const initiateSocket = () => {\n  socket = io('https://squid-radio.net', { path: '/api/socket.io' })\n  console.log('Connecting socket...')\n}\n\nexport const disconnectSocket = () => {\n  console.log('Disconnecting socket...')\n  if (socket) socket.disconnect()\n}\n\nexport const subscribeToStation = (station, cb) => {\n  socket.on(station, cb)\n}\n\n/* export const sendMessage = (room, message) => {\n  if (socket) socket.emit('chat', { message, room })\n} */\n","import { makeStyles } from '@material-ui/core/styles'\nimport Slider from '@material-ui/core/Slider'\nimport VolumeDown from '@material-ui/icons/VolumeDown'\nimport VolumeUp from '@material-ui/icons/VolumeUp'\n\nconst useStyles = makeStyles({\n  root: {\n    color: 'white',\n    display: 'flex',\n    flexDirection: 'row'\n  }\n})\n\nexport default function ContinuousSlider (props) {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      <VolumeDown className='mx-3' />\n      <Slider min={0} max={1} step={0.01} value={props.value} onChange={props.handleChange} aria-labelledby='continuous-slider' />\n      <VolumeUp className='mx-3' />\n    </div>\n  )\n}\n","import { useState, useEffect, useCallback, Fragment } from 'react'\nimport { Container, Row, Col } from 'reactstrap'\nimport classnames from 'classnames'\nimport useAxios from 'axios-hooks'\nimport { initiateSocket, disconnectSocket, subscribeToStation } from './Socket'\nimport Slider from './js/Slider'\nimport { A } from 'hookrouter'\nimport DetectableOverflow from 'react-detectable-overflow'\n\nimport styles from './css/widget.module.scss'\n\nfunction useAudioRef () {\n  const [audio, setAudio] = useState(null)\n  const [playing, setPlay] = useState(false)\n  const [loading, setLoading] = useState(true)\n\n  const ref = useCallback(node => {\n    if (node !== null) {\n      node.onplay = () => setPlay(true)\n      node.onpause = () => setPlay(false)\n\n      node.onloadstart = () => setLoading(true)\n      node.waiting = () => setLoading(true)\n\n      node.onloadeddata = () => setLoading(false)\n      node.canplay = () => setLoading(false)\n      node.playing = () => setLoading(false)\n\n      setAudio(node)\n    }\n  }, [])\n\n  return { audio, ref, playing, loading }\n}\n\nexport default function Player (props) {\n  const { audio, ref: audioRef, playing } = useAudioRef()\n  const [{ data }] = useAxios('https://squid-radio.net/api/meta')\n  const [volume, setVolumeState] = useState(0.5)\n  const [song, setSong] = useState({\n    album: 'The Best Videogame Music 24/7',\n    title: '',\n    artist: ''\n  })\n\n  useEffect(() => {\n    if (audio) {\n      audio.src = `https://play.squid-radio.net/${props.station}`\n      audio.load()\n      audio.play()\n    }\n    initiateSocket()\n    subscribeToStation(props.station, msg => setSong(msg))\n\n    return () => {\n      disconnectSocket()\n    }\n    // eslint-disable-next-line\n  }, [props.station])\n\n  function defaultBackground (ev) {\n    ev.target.src = `/images/logo/soc_${props.station}.png`\n  }\n\n  function setPlay () {\n    if (playing) audio.pause()\n    else {\n      audio.load()\n      audio.play()\n    }\n  }\n\n  function setVolume (ev, value) {\n    audio.volume = value\n    setVolumeState(value)\n  }\n\n  return (\n    <Container className={classnames(styles.player, 'text-center px-2 px-md-0 h-100 d-flex align-items-center justify-content-center flex-column')}>\n      <audio ref={audioRef} preload='none' id='erplayer-audio' src={`https://play.squid-radio.net/${props.station}`} volume={volume} />\n      <div className={styles.background}>\n        <div className={styles.effect} />\n        <img src={`https://squid-radio.net/covers/${song.album}.jpg`} onError={defaultBackground} alt='' />\n      </div>\n\n      <Row className={classnames(styles.content, 'justify-content-center my-1 w-100')}>\n        {props.icon && (\n          <Col xs='auto'>\n            <div className={styles.station}>\n              <img src={`/images/station/station_${props.station}.png`} alt='' />\n            </div>\n          </Col>\n        )}\n        <Col xs='auto'>\n          <Row style={{ height: `${3 / 5 * 100}%`, fontSize: '24px' }} className='overflow-hidden'>\n            <Col>\n              <Marquee text={`${song.artist} - ${song.title}`} />\n            </Col>\n          </Row>\n          <Row style={{ height: `${2 / 5 * 100}%`, fontSize: '16px' }} className='overflow-hidden'>\n            <Col>\n              <Marquee text={song.album} />\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n\n      <Row className='my-1'>\n        <Col>\n          <span className={styles.stations}>\n            {data &&\n          Object.keys(data).filter(s => s !== 'undefined').map((stationName, i, arr) => (\n            <Fragment key={stationName}>\n              {stationName === props.station\n                ? <span className={styles.current}>{stationName}</span>\n                : <A disabled href={`/${stationName}`}>{stationName}</A>}\n              {arr.length - 1 !== i && ' - '}\n            </Fragment>\n          ))}\n          </span>\n        </Col>\n      </Row>\n\n      <Row className='mt-1 w-100 justify-content-center'>\n        <Col xs={12} md={4}>\n          <Row className='justify-content-center'>\n            <Col md={12}>\n              <Slider handleChange={setVolume} value={volume} />\n            </Col>\n            <Col xs='auto' className='mt-3'>\n              <div onClick={setPlay} className={classnames(styles.playpause, { [styles.playing]: playing })}>\n                <label htmlFor={styles.playpause} tabIndex={1} />\n              </div>\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n    </Container>\n  )\n}\n\nfunction Marquee (props) {\n  const [overflowed, setOverflow] = useState()\n  const style = { whiteSpace: 'nowrap' }\n\n  return (\n    <>\n      <DetectableOverflow style={{ width: '100%', visibility: 'hidden', position: 'absolute', ...style }} onChange={isOverflowed => setOverflow(isOverflowed)}>\n        {props.text}\n      </DetectableOverflow>\n      <div className={classnames({ marquee: overflowed })} style={style}>{props.text}</div>\n    </>\n  )\n}\n","import { useState, useEffect, useCallback, Fragment } from 'react'\nimport { Container, Row, Col } from 'reactstrap'\nimport classnames from 'classnames'\nimport useAxios from 'axios-hooks'\nimport { initiateSocket, disconnectSocket, subscribeToStation } from './Socket'\nimport Slider from './js/Slider'\nimport { A } from 'hookrouter'\nimport DetectableOverflow from 'react-detectable-overflow'\n\nimport styles from './css/player.module.scss'\n\nfunction useAudioRef () {\n  const [audio, setAudio] = useState(null)\n  const [playing, setPlay] = useState(false)\n  const [loading, setLoading] = useState(true)\n\n  const ref = useCallback(node => {\n    if (node !== null) {\n      node.onplay = () => setPlay(true)\n      node.onpause = () => setPlay(false)\n\n      node.onloadstart = () => setLoading(true)\n      node.waiting = () => setLoading(true)\n\n      node.onloadeddata = () => setLoading(false)\n      node.canplay = () => setLoading(false)\n      node.playing = () => setLoading(false)\n\n      setAudio(node)\n    }\n  }, [])\n\n  return { audio, ref, playing, loading }\n}\n\nexport default function Player (props) {\n  const { audio, ref: audioRef, playing } = useAudioRef()\n  const [{ data }] = useAxios('https://squid-radio.net/api/meta')\n  const [volume, setVolumeState] = useState(0.5)\n  const [song, setSong] = useState({\n    album: 'The Best Videogame Music 24/7',\n    title: '',\n    artist: ''\n  })\n\n  useEffect(() => {\n    if (audio) {\n      audio.src = `https://play.squid-radio.net/${props.station}`\n      audio.load()\n      audio.play()\n    }\n    initiateSocket()\n    subscribeToStation(props.station, msg => setSong(msg))\n\n    return () => {\n      disconnectSocket()\n    }\n    // eslint-disable-next-line\n  }, [props.station])\n\n  function defaultBackground (ev) {\n    ev.target.src = `/images/logo/soc_${props.station}.png`\n  }\n\n  function setPlay () {\n    if (playing) audio.pause()\n    else {\n      audio.load()\n      audio.play()\n    }\n  }\n\n  function setVolume (ev, value) {\n    audio.volume = value\n    setVolumeState(value)\n  }\n\n  return (\n    <Container className={classnames(styles.player, 'text-center px-2 px-md-0 h-100 d-flex align-items-center justify-content-center flex-column')}>\n      <audio ref={audioRef} preload='none' id='erplayer-audio' src={`https://play.squid-radio.net/${props.station}`} volume={volume} />\n      <div className={styles.background}>\n        <div className={styles.effect} />\n        <img src={`https://squid-radio.net/covers/${song.album}.jpg`} onError={defaultBackground} alt='' />\n      </div>\n\n      <Row className={classnames(styles.content, 'justify-content-center my-4 w-100')}>\n        <Col xs='auto'>\n          <div className={styles.station}>\n            <img src={`/images/station/station_${props.station}.png`} alt='' />\n          </div>\n        </Col>\n        <Col xs='auto'>\n          <Row style={{ height: `${2 / 5 * 100}%`, fontSize: '45px' }} className='overflow-hidden'>\n            <Col>\n              <Marquee text={song.artist} />\n            </Col>\n          </Row>\n          <Row style={{ height: `${2 / 5 * 100}%`, fontSize: '45px' }} className='overflow-hidden'>\n            <Col>\n              <Marquee text={song.title} />\n            </Col>\n          </Row>\n          <Row style={{ height: `${1 / 5 * 100}%`, fontSize: '25px' }} className='overflow-hidden'>\n            <Col>\n              <Marquee text={song.album} />\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n\n      <Row className='my-4'>\n        <Col>\n          <span className={styles.stations}>Available stations: <br className='d-block d-md-none' />\n            {data &&\n          Object.keys(data).filter(s => s !== 'undefined').map((stationName, i, arr) => (\n            <Fragment key={stationName}>\n              {stationName === props.station\n                ? <span className={styles.current}>{stationName}</span>\n                : <A disabled href={`/${stationName}`}>{stationName}</A>}\n              {arr.length - 1 !== i && ' - '}\n            </Fragment>\n          ))}\n          </span>\n        </Col>\n      </Row>\n\n      <Row className='mt-4 w-100 justify-content-center'>\n        <Col xs={12} md={4}>\n          <Row className='justify-content-center'>\n            <Col md={12}>\n              <Slider handleChange={setVolume} value={volume} />\n            </Col>\n            <Col xs='auto' className='mt-3'>\n              <div onClick={setPlay} className={classnames(styles.playpause, { [styles.playing]: playing })}>\n                <label htmlFor={styles.playpause} tabIndex={1} />\n              </div>\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n    </Container>\n  )\n}\n\nfunction Marquee (props) {\n  const [overflowed, setOverflow] = useState()\n  const style = { whiteSpace: 'nowrap' }\n\n  return (\n    <>\n      <DetectableOverflow style={{ width: '100%', visibility: 'hidden', position: 'absolute', ...style }} onChange={isOverflowed => setOverflow(isOverflowed)}>\n        {props.text}\n      </DetectableOverflow>\n      <div className={classnames({ marquee: overflowed })} style={style}>{props.text}</div>\n    </>\n  )\n}\n","import { useRoutes } from 'hookrouter'\nimport Widget from './Widget'\nimport Player from './Player'\nimport { AudioPlayerProvider } from 'react-use-audio-player'\n\nimport './css/global.css'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nconst routes = {\n  '/board': () => <Widget station='clouds' icon={false} />,\n  '/board/:station': ({ station }) => <Widget station={station} icon={false} />,\n  '/widget': () => <Widget station='clouds' icon />,\n  '/widget/:station': ({ station }) => <Widget station={station} icon />,\n\n  '/': () => <Player station='clouds' />,\n  '/:station': ({ station }) => <Player station={station} />\n}\n\nconst App = () => {\n  const routeResult = useRoutes(routes)\n  return <AudioPlayerProvider>{routeResult}</AudioPlayerProvider> || (\n    <script>{(\n      window.location.href = '/404.html'\n    )}\n    </script>\n  )\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}